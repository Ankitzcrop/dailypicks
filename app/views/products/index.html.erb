<div class="container-fluid">
  <div class="row mt-5">
   <% @products.each do |product| %>
    <div class="col-md-4 mb-4">
      <div class="card shadow-sm border-muted rounded-4 position-relative">
        <div class="card-body p-3 mb-2">
          <!-- Category -->
          <p class="text-muted mb-1 small mt-3">
            <%= product.subcategory&.category&.name || "Category" %>
          </p>        
          <!-- Product Image -->
          <div class="text-center mt-5 mb-3">
            <%# <% if product.image_url.present? %>
              <%# <%= image_tag product.image_url, class: "img-fluid rounded mb-3", style: "height: 150px; width: 150px; object-fit: cover;", alt: product.name %> 
            <%# <% else %> 
              <%# <div class="no-image-placeholder"> %>
                <%# No Image Available %>
              <%# </div> %>
            <%# <% end %> 
            <%= link_to details_product_path(product) do %>
              <% if product.image.attached? %>
                <%= image_tag product.image,
                    class: "img-fluid rounded mb-3",
                    style: "height: 150px; width: 150px; object-fit: cover;" %>
              <% else %>
                <div class="no-image-placeholder">No Image Available</div>
              <% end %>
            <% end %>
          </div>
          <!-- Product Title -->
          <p class="card-title fs-6"><%= product.name %></p>
          <!-- Price -->
          <div class="d-flex align-items-center mt-2">
            <h5 class="card-text mb-0 text-dark me-3">
              ₹<%= product.discount_price.presence || product.price %>
            </h5>
            <h6 class="card-text mb-0 text-muted text-decoration-line-through small">₹<%= product.price %></h6>
          </div>
          <!-- Rating and Sold Count -->
          <div class="d-flex justify-content-between align-items-center mt-2">
            <!-- Star Rating -->
            <div class="d-flex align-items-center">
              <% (1..5).each do |i| %>
                <% rating = product.rating.to_i %>
                <% if i <= rating %>
                  <%= image_tag "Property_1=Variant16.svg", alt: "Star", class: "me-1 star-icon" %>
                <% else %>
                  <%= image_tag "Property_1=star.svg", alt: "Empty Star", class: "me-1 star2-icon" %>
                <% end %>
              <% end %>
            </div>
            <!-- Sold Count -->
            <%# <p class="mb-0 text-muted small">sold: <%= product.bought_in_past_month %>
          </div>
          <!-- Free Delivery -->
          <% if product.free_delivery %>
            <p class="text-success fw-bold mt-2">FREE delivery</p>
          <% else %>
            <p class="text-danger fw-bold mt-2">Delivery Charges Apply</p>
          <% end %>
          <!-- Stock -->
          <p class="text-muted small mt-2">
            Stock:
            <%= product.stock_quantity.to_i > 0 ? product.stock_quantity : "Out of Stock" %>
          </p>
        </div>
        <!-- Card Icons -->
        <div class="card-icons position-absolute">
          <div class="icon-wrapper">
            <div class="icon-circle">
              <%= image_tag "Property_1=heart.svg", alt: "Like", class: "card-icon" %>
            </div>
            <span class="icon-text">Add to Wishlist</span>
          </div>
          <div class="icon-wrapper">
            <div class="icon-circle">
              <%= image_tag "Property_1=eye.svg", alt: "Eye", class: "card-icon" %>
            </div>
            <span class="icon-text">Quick View</span>
          </div>
          <div class="icon-wrapper">
            <div class="icon-circle">
              <%= image_tag "Property_1=cart-add.svg", alt: "Cart", class: "card-icon" %>
            </div>
            <span class="icon-text">Add to Cart</span>
          </div>
        </div>
      </div>
    </div>
  <% end %>
  </div>
</div>

<style>
 
 body{
  margin: 0px !important;
  padding: 0px !important;
  overflow-x: hidden !important;
 }
  .carousel-control-prev, .carousel-control-next {
    visibility: hidden;
  }
  .button{
    background-color: #88bb2f;
    color: white;
  }

.badge{
  font-size: 1.5rem; 
  width: 4rem; 
  height: 4rem;
}
/* Base styles for the navigation items */

/* Active state styling */
.nav-link.active {
  color: #88bb2f; /* Active text color */
  border-bottom: 3px solid #88bb2f !important; /* Active bottom border color */
}

/* Hover effect */
.nav-link:hover {
  color: #88bb2f;
  border-bottom: 3px solid #88bb2f !important; /* Hover styling with higher specificity */
}

.star-icon {
  width: 15px; /* Adjust the width as per your preference */
  height: 15px; /* Adjust the height as per your preference */
}
.star2-icon {
  width: 14px; /* Adjust the width as per your preference */
  height: 14px; /* Adjust the height as per your preference */
}

.card {
  position: relative;
}

.card:hover{
  border: 1px solid #88bb2f ;
}

.card-icons {
  position: absolute;
  top: 30%;  /* Position the icons vertically in the middle */
  right: 10px;  /* Adjust to position inside the card (can be any value depending on your needs) */
  transform: translateY(-50%);
  opacity: 0;
  transition: opacity 0.3s ease;
  display: flex;
  flex-direction: column;
}

.icon-wrapper {
  position: relative;  /* To position the text over or beside the icons */
}

.card-icon {
  width: 20px; /* Adjust size of icon inside the circle */
  height: 20px; /* Adjust size of icon inside the circle */
  display: block; /* Ensure the icon is displayed as a block element */
}
.card:hover .card-icons {
  opacity: 1;

}

/* Tooltip-like effect for the text */
.icon-text {
  position: absolute;
  top: 50%; /* Center the text vertically relative to the icon */
  right: 35px; /* Position the text to the left of the icon */
  transform: translateY(-50%); /* Adjusts to ensure the text is centered vertically */
  background-color: rgba(211, 211, 211, 0.7);
  color: black; /* Text color */
  padding: 8px 12px; /* Increased padding for a larger text box */
  border-radius: 4px;
  font-size: 14px; /* Increase font size for better readability */
  width: 120px; /* Increase width to allow more space for the text */
  max-width: 200px; /* Set a max width to prevent it from becoming too wide */
  word-wrap: break-word; /* Ensure long text wraps within the box */
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;  /* Disable interaction with the tooltip */
}

/* Show the text when hovering over an icon */
.icon-wrapper:hover .icon-text {
  opacity: 1;
}

.icon-circle {
  width: 30px; /* Size of the circle */
  height: 30px; /* Size of the circle */
  background-color: rgba(211, 211, 211, 0.7); /* Light grey background */
  border-radius: 50%; /* Make the circle shape */
  display: flex;
  justify-content: center; /* Horizontally center the icon */
  align-items: center; /* Vertically center the icon */
  margin-bottom: 10px; /* Space between icons */
}
.background{
  background-color: #433520;
}
.trending-header h4 {
  font-size: 1.5rem;
  font-weight: bold;
}

.header-underline {
  position: absolute;
  left: 0;
  bottom: -5px;
  width: 100px;
  height: 3px;
  background-color: #6ac259; /* Green underline */
  border-radius: 5px;
}

.header-underline2 {
  position: absolute;
  left: 0;
  bottom: -5px;
  width: 150px;
  height: 3px;
  background-color: #6ac259; /* Green underline */
  border-radius: 5px;
}

/* Carousel Arrow Styling */
.carousel-arrow {
  border: none;
  background: none;
  color: #000; /* Default arrow color */
  font-size: 1.5rem; /* Adjust arrow size */
  cursor: pointer;
  padding: 0 10px;
}

.carousel-arrow:hover {
  color: #6ac259; /* Green hover effect */
  transform: scale(1.2); /* Slightly enlarge on hover */
}

/* Carousel Item Styling */
.carousel-inner {
  display: flex;
  align-items: center;
}

.carousel-item {
  transition: transform 0.5s ease-in-out;
}

a{
  text-decoration: none;
}
</style>
