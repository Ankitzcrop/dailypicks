<div class="container my-5">
  <div class="row g-5 align-items-start">

    <!-- LEFT : ORDER SUMMARY -->
    <div class="col-lg-4">
      <div class="checkout-card">
        <h5 class="card-title mb-3">
          üõí Order Summary
        </h5>

        <% @products.each do |product| %>
          <div class="summary-item">
            <div>
              <p class="product-name mb-1"><%= product.name %></p>
              <small class="text-muted">
                Qty: <%= session[:cart][product.id.to_s] %>
              </small>
            </div>

            <strong class="price">
              ‚Ç± <%= (product.discount_price.presence || product.price) *
                     session[:cart][product.id.to_s] %>
            </strong>
          </div>
        <% end %>

        <hr>

        <div class="d-flex justify-content-between align-items-center">
          <span class="fw-bold fs-6">Total</span>
          <span class="fw-bold fs-4 text-success">
            ‚Ç± <%= @total %>
          </span>
        </div>

        <div class="benefits mt-4">
          <p>‚úî Cash on Delivery Available</p>
          <p>üöö Delivery within 3 days</p>
        </div>
      </div>
    </div>

    <!-- RIGHT : DELIVERY ADDRESS -->
    <div class="col-lg-8">
      <div class="checkout-card">
        <h5 class="card-title mb-4">
          üìç Delivery Address
        </h5>

        <%= form_with url: place_order_checkout_index_path, method: :post do %>

          <div class="row g-3">
            <div class="col-md-6">
              <%= text_field_tag :full_name, current_user&.name,
                class: "form-control input-lg",
                placeholder: "Full Name", required: true %>
            </div>

            <div class="col-md-6">
              <%= text_field_tag :phone, nil,
                class: "form-control input-lg",
                placeholder: "Phone Number", required: true %>
            </div>

            <div class="col-md-12">
              <%= text_field_tag :address_line1, nil,
                class: "form-control input-lg",
                placeholder: "House No, Street, Area", required: true %>
            </div>

            <div class="col-md-12">
              <%= text_field_tag :address_line2, nil,
                class: "form-control",
                placeholder: "Landmark (Optional)" %>
            </div>

            <div class="col-md-4">
              <%= text_field_tag :city, nil,
                class: "form-control",
                placeholder: "City", required: true %>
            </div>

            <div class="col-md-4">
              <%= text_field_tag :state, nil,
                class: "form-control",
                placeholder: "State", required: true %>
            </div>

            <div class="col-md-4">
              <%= text_field_tag :pincode, nil,
                class: "form-control",
                placeholder: "Pincode", required: true %>
            </div>
          </div>

          <div class="text-end mt-5">
            <%= submit_tag "Place Order",
              class: "btn place-order-btn px-5 py-3" %>
          </div>

        <% end %>
      </div>
    </div>

  </div>
</div>
<style>
  .checkout-card {
    background: #fff;
    border-radius: 16px;
    padding: 24px;
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.06);
  }

  .card-title {
    font-weight: 700;
    font-size: 1.2rem;
  }

  .summary-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 14px;
  }

  .product-name {
    font-weight: 600;
    font-size: 0.95rem;
  }

  .price {
    font-size: 0.95rem;
  }

  .benefits p {
    font-size: 0.9rem;
    margin-bottom: 6px;
    color: #2e7d32;
  }

  .input-lg {
    height: 50px;
    border-radius: 10px;
  }

  .place-order-btn {
    background: linear-gradient(135deg, #6ac259, #88bb2f);
    color: white;
    font-size: 1.05rem;
    font-weight: 700;
    border-radius: 30px;
    border: none;
    transition: all 0.3s ease;
  }

  .place-order-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 18px rgba(0,0,0,0.15);
  }
</style>